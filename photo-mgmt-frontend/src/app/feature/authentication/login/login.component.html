<div class="container mt-5">
  @if (loginForm) {
    <form [formGroup]="loginForm" class="card mx-auto login-form" (ngSubmit)="login()">
      <div class="card-header text-center">
        <i class="fas fa-sign-in-alt fa-3x mb-2"></i><br />
        <strong>Login</strong>
      </div>

      <div class="card-body">
        <div class="mb-3">
          <label class="form-label">Email:</label>
          <input type="email" class="form-control" formControlName="email" />
          @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
            <div class="text-danger small">
              @if (loginForm.get('email')?.errors?.['required']) {
                Email is required.
              }
              @if (loginForm.get('email')?.errors?.['email']) {
                Please enter a valid email.
              }
            </div>
          }
        </div>

        <div class="mb-3">
          <label class="form-label">Password:</label>
          <input type="password" class="form-control" formControlName="password" />
          @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
            <div class="text-danger small">
              Password is required.
            </div>
          }
        </div>

        @if (errorMessage) {
          <div class="alert alert-danger alert-dismissible fade show d-flex align-items-center justify-content-between" role="alert">
            <div>
              <i class="fas fa-exclamation-circle me-2"></i>
              {{ errorMessage }}
            </div>
            <button type="button" class="btn-close" aria-label="Close" (click)="dismissError()"></button>
          </div>
        }
      </div>

      <div class="card-footer text-end">
        <button type="submit" class="btn btn-outline-primary" [disabled]="loginForm.invalid">
          <i class="fas fa-arrow-right"></i> Login
        </button>
      </div>
    </form>
  } @else {
    <div class="alert alert-info text-center mt-4">Loading login form...</div>
  }
</div>
