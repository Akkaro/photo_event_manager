<!-- photo-mgmt-frontend/src/app/feature/photos/photo-edit/photo-edit.component.html -->

<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Edit Photo</h2>
    <button class="btn btn-outline-secondary" (click)="cancel()">
      <i class="fas fa-times"></i> Cancel
    </button>
  </div>

  @if (loading) {
  <div class="text-center my-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2">Loading photo...</p>
  </div>
  } @else if (error) {
  <div class="alert alert-danger text-center mt-4">{{ error }}</div>
  } @else if (photo) {
  <div class="row">
    <!-- Photo Preview -->
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="fas fa-image"></i> {{ photo.photoName }}
  </h5>
</div>
<div class="card-body p-0">
  <img [src]="previewUrl" class="img-fluid w-100" [alt]="photo.photoName" style="max-height: 600px; object-fit: contain;">
</div>
</div>
</div>

<!-- Edit Controls -->
<div class="col-md-4">
<form [formGroup]="editForm" (ngSubmit)="onSubmit()">
<div class="card">
  <div class="card-header">
    <h5 class="mb-0">
      <i class="fas fa-sliders-h"></i> Adjustments
    </h5>
  </div>

  <div class="card-body">
    <!-- Brightness Control -->
    <div class="mb-4">
      <label for="brightness" class="form-label">
        Brightness: <span class="fw-bold">{{ brightnessValue | number:'1.1-1' }}</span>
              </label>
              <input
                type="range"
                id="brightness"
                class="form-range"
                formControlName="brightness"
                min="0.1"
                max="3.0"
                step="0.1">
              <div class="d-flex justify-content-between">
                <small class="text-muted">0.1</small>
                <small class="text-muted">1.0 (Normal)</small>
                <small class="text-muted">3.0</small>
              </div>
              @if (editForm.get('brightness')?.invalid && editForm.get('brightness')?.touched) {
  <div class="text-danger small mt-1">
    Brightness must be between 0.1 and 3.0
  </div>
  }
  </div>

  <!-- Contrast Control -->
  <div class="mb-4">
    <label for="contrast" class="form-label">
      Contrast: <span class="fw-bold">{{ contrastValue | number:'1.1-1' }}</span>
              </label>
              <input
                type="range"
                id="contrast"
                class="form-range"
                formControlName="contrast"
                min="0.1"
                max="3.0"
                step="0.1">
              <div class="d-flex justify-content-between">
                <small class="text-muted">0.1</small>
                <small class="text-muted">1.0 (Normal)</small>
                <small class="text-muted">3.0</small>
              </div>
              @if (editForm.get('contrast')?.invalid && editForm.get('contrast')?.touched) {
  <div class="text-danger small mt-1">
    Contrast must be between 0.1 and 3.0
  </div>
  }
  </div>

  <!-- Action Buttons -->
  <div class="d-grid gap-2">
    <button
      type="button"
      class="btn btn-outline-secondary"
      (click)="resetValues()"
      [disabled]="processing">
      <i class="fas fa-undo"></i> Reset to Normal
    </button>

    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="editForm.invalid || processing">
      @if (processing) {
  <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
  Processing...
  } @else {
  <i class="fas fa-magic"></i> Apply Changes
  }
  </button>
</div>

<!-- Info Alert -->
<div class="alert alert-info mt-3" role="alert">
  <i class="fas fa-info-circle"></i>
  <strong>Note:</strong> Changes will be applied to create a new edited version of your photo.
</div>
</div>
</div>
</form>
</div>
</div>
  }
</div>
